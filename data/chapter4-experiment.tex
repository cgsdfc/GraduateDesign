% !Mode:: "TeX:UTF-8"
% Author: Zhengxi Tian
% Email: zhengxi.tian@hotmail.com

\chapter{实验结果与讨论}\label{ch:experiment}
本章从系统层面得分，句子层面得分和定性分析三个方面展示了实验的数据与结论。

\section{系统层面得分}\label{sec:system_scores}
图~\ref{tab:systemScoresAll}~展示了各个模型在不同数据集上测定的各种指标的系统层面得分，
加粗的得分是三个系统中的最优者。
从表中的数据来看，在LSDSCC上的最优模型是HRED，
在OpenSubtitles上的最优模型是VHRED，
在Ubuntu上的最优模型是HRED，它在9个指标中取得了最优，但是LSTM也在6个指标中取得了最优。

\input{data/system_scores.tex}

\section{句子层面得分}\label{sec:utterance_scores}
我们还从句子层面得分方面进行了分析。
因为模型生成的句子$u$可以看做一个句子空间$U$上的随机变量，而指标是一个确定的函数$f_{s}$，
所以可以把句子层面的得分看做一个随机变量$\lambda_u = f_{s}(u)$。
于是我们便可以用描述统计学（Descriptive Statistics）和统计推断断（Statistical Inference）
的方法来分析指标在句子水平的情况，包括单变量和双变量的方法，以及各种统计数据。
以下所有图片均使用seaborn绘制\footnote{\url{http://seaborn.pydata.org/}}。

\subsection{指标的概率分布}\label{subsec:metric_distribution}
我们绘制了各种指标的句子层面得分的单变量分布（Univariate Distribution）。
为了便于从图像上比较各种指标的分布特征，我们对数值作了归一化（Scaling）处理，使数据的平均值为0，标准差为1：
\begin{align}
    x' = \frac{x - \mu}{\sigma}
\end{align}
我们绘制了在所有$(m, d, s)$的组合上绘制了分布图，并发现各种指标的分布在不同的数据集和模型的组合上
有着相似的形状。为了使读者能迅速检阅所有指标的分布，我们在正文中展示的是$(\text{HRED}, \text{OpenSubtitles})$
上各项指标的分布。请参阅附录~\ref{ch:metric_dist}~查看所有的组合上的分布。

图~\ref{fig:BLEU_dist}~是BLEU的N取1到4时的分布图。
由于加入了平滑处理，所以大部分得分都有非零数值，
然而正如\cite{HowNot}所说，大部分句子的得分非常低，
在图像上的反映是，在均值附近集中了大量的概率质量（Probability Mass）。
得分较高和较低的句子非常少，几乎没有。
比其更高的N值，Unigram匹配是最容易得到的，所以BLEU-1在
均值的右边有一个比较低矮的分布，并且峰值对应的横坐标偏离了均值0，
这说明有相当一部分句子的得分高于均值。
而低于均值的部分出现了一个高峰，说明也有大量句子得分低于均值，
但总体来说，得分高于均值的句子更多。
BLEU-2至4的分布都非常相似，峰值的横坐标比BLEU-1更接近均值。
从总体上来说，BLEU的分布形状十分尖锐，大量句子集中在均值或略高于均值附近，
图像不对称， 峰值比高斯分布的峰值$1 / \sqrt{2 \pi} \approx 0.4$高。
\input{data/distplot_group/BLEU.tex}

图~\ref{fig:ADEM_EB_dist}~是基于词嵌入的指标和ADEM指标的分布图。
四个图像均呈钟型曲线，峰值非常接近0.4，峰值的横坐标则非常接近0。
ADEM曲线显示出几乎完美的对称，Greedy曲线的对称度次之，
Average曲线向右边偏移，Extrema曲线向左边偏移。
这里我们把ADEM和词嵌入指标放在一起对比的原因是：
ADEM可以看做是一种更高级的词嵌入指标。
ADEM模型首先用VHRED的编码器对输入句子编码，
这其实就是一种从单词的向量得到句子的向量的组合方法，
Average使用的组合方法是平均值，Extrema的组合方法是极端值，
而ADEM的组合方法是RNN编码器。
ADEM的高级之处在于考虑了

%中心极限定理表明（Central Limit Theorems）：大量独立随机变量的叠加近似于高斯分布。
%因为各位人类评价员之间的评价是独立的， 我们假设当句子足够多时，句子层面的人类评价近似于高斯分布。
%从该假设出发我们认为，句子层面得分的分布接近高斯分布是一个指标和人类评价具有较高相关性的前提条件之一。
%我们

\input{data/distplot_group/ADEM_EB.tex}
\input{data/distplot_group/ROUGE.tex}
\input{data/distplot_group/Other.tex}

\subsection{不同指标的相关性分析}\label{subsec:metric_correlation}

\section{定性分析}\label{sec:qualitative_analysis}

\section{结果与讨论}\label{sec:result_and_discussion}

\section{本章小结}\label{sec:experiment_conclusion}
